---
layout: post
title:  "Hadoop安装与配置"
date:  2017-02-05 23:00:39
categories:  大数据  
tags:  大数据 Hadoop
excerpt: 大数据-Hadoop
---

* content
{:toc}

##  简要

*   简单介绍一下Hadoop在linux下面的安装与配置

##  准备

*   需要linux下安装java环境,这里就不再详细介绍了
*   安装JDK:  ```apt-get install openjdk-7-jdk```

##  下载


```shell
wget http://mirror.bit.edu.cn/apache/hadoop/common/hadoop-1.2.1/hadoop-1.2.1.tar.gz
```

##  安装

移动到 ```/opt/``` 目录

```
mv hadoop-1.2.1.tar.gz /opt/
```

解压

```
tar -zxvf hadoop-1.2.1.tar.gz
```

设置环境变量

```
vi /etc/profile
```

打开之后新添加

```
export HADOOP_HOME=/opt/hadoop-1.2.1
//PATH新添加 $HADOOP_HOME/bin:
export PATH=$JAVA_HOME/bin:/usr/local/nginx/sbin:/usr/local/mysql/bin:$HADOOP_HOME/bin:$PATH
//wq保存
```

重新加载资源生效

```
source /opt/profile
```

##  配置

*   修改相关配置文件    $HADOOP_HOME/conf:

        1）修改hadoop-env.sh，设置JAVA_HOME；
        2）修改core-site.xml，设置hadoop.tmp.dir、dfs.name.dir、fs.default.name；
        3）修改mapred-site.xml，设置mapred.job.tracker；
        4）修改hdfs-site.xml，设置dfs.data.dir；
    注意：
    
        hadoop.tmp.dir是临时文件存放目录
        dfs.name.dir是namenode元数据存放目录
        fs.default.name是缺省文件url标识

1. ```vi hadoop-evn.sh```

*   添加JAVA_HOME ```echo &JAVA_HOME```获取路径

```  
export JAVA_HOME=/usr/java/default 
```
    
2.  修改core-site.xml

```
vi core-site.xml
```

然后添加下面内容

```xml
<!-- core-site.xml -->
<property>
<name>hadoop.tmp.dir</name>
<value>/hadoop</value>
</property>
<property>
<name>dfs.name.dir</name>
<value>/hadoop/name</value>
</property>
<property>
<name>fs.default.name</name>
<value>hdfs://localhost:9000</value>
</property>
```

3.  修改mapred-site.xml

```xml
<!--mapred-site.xml配置-->
<property>
<name>mapred.job.tracker</name>
<value>localhost:9001</value>
</property>
```

4.  修改hdfs-site.xml

```xml
<!--hdfs-site.xml-->
<property>
<name>dfs.data.dir</name>
<value>/hapoop/data</value>
</property>

```

##  启动

*   首先格式化

``` 
hadoop namenode -format
```

*   启动

```
start-all.sh
```

*   检查

```
jps
```

看到如下进程，表示启动成功。安装完成

```
26882 SecondaryNameNode
30563 Jps
26758 DataNode
8105 jar
26619 NameNode
27134 TaskTracker
26958 JobTracker
```

##  资料文档

官方文档：http://hadoop.apache.org/docs/r1.2.1/